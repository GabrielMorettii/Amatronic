{
  "openapi": "3.0.0",
  "info": {
      "title": "Amatronic Documentation",
      "description": "This is an E-commerce's API Rest",
      "version": "1.0.0",
      "contact": {
          "email": "gabrielmorettisilva@gmail.com"
      }
  },
  "paths": {
    "/sessions": {
      "post": {
          "tags": ["Session"],
          "summary": "Authenticate Customer",
          "description": "The Customer Authentication",
          "requestBody": {
              "content": {
                  "application/json": {
                      "schema": {
                          "type": "object",
                          "properties": {
                              "email": {
                                  "type": "string"
                              },
                              "password": {
                                  "type": "string"
                              }
                          }
                      }
                  }
              }
          },
          "responses": {
              "200": {
                  "description": "Ok"
              },
              "400": {
                  "description": "Invalid credentials!"
              }
          }
      }
    },
    "/customers": {
        "post": {
            "tags": ["Customers"],
            "summary": "Create a customer",
            "description": "Create a new customer",
            "requestBody": {
                "content": {
                    "application/json": {
                        "schema": {
                            "type": "object",
                            "properties": {
                                "email": {
                                  "type": "string"
                                },
                                "name": {
                                    "type": "string"
                                },
                                "password": {
                                    "type": "string"
                                }
                            },
                            "example": {
                                "email": "emailsample@gmail.com",
                                "name": "sample name",
                                "password": "sample password"
                            }
                        }
                    }
                }
            },
            "responses": {
                "201": {
                    "description": "Created"
                },
                "400": {
                    "description": "The email already exists"
                }
            }
        },
        "get": {
            "tags": ["Customers"],
            "summary": "List all customers",
            "description": "Only the admin can list all customers",
            "security": [
              {
                  "bearerAuth": []
              }
            ],
            "responses": {
                "200": {
                    "description": "OK",
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "array",
                                "items": {
                                    "type": "object",
                                    "properties": {
                                        "id": {
                                          "type": "string",
                                          "format": "uuid"
                                        },
                                        "name": {
                                          "type": "string"
                                        },
                                        "email": {
                                          "type": "string"
                                        },
                                        "admin": {
                                          "type": "boolean"
                                        },
                                        "avatar": {
                                          "type": "string",
                                          "nullable": true
                                        },
                                        "created_at": {
                                          "type": "string",
                                          "format": "date-time"
                                        },
                                        "updated_at": {
                                          "type": "string",
                                          "format": "date-time"
                                        }
                                    }
                                }
                            }
                        }
                    }
                },
                "401":{
                    "description": "Something is wrong with the token",
                    "content": {
                      "application/json": {
                          "schema": {
                              "type": "object",
                              "properties": {
                                  "message": {
                                    "type": "string"
                                  }
                              }
                          }
                      }
                  }
                }
            }
        },
        "put": {
          "tags": ["Customers"],
          "summary": "Update a customer",
          "description": "The costumer can update yours informations",
          "security": [
            {
                "bearerAuth": []
            }
          ],
          "requestBody": {
              "content": {
                  "application/json": {
                      "schema": {
                          "type": "object",
                          "properties": {
                              "name": {
                                "type": "string",
                                "required": false
                              },
                              "email": {
                                "type": "string",
                                "required": false
                              },
                              "password": {
                                "type": "string",
                                "required": false
                              },
                              "avatar": {
                                "type": "string",
                                "required": false
                              }
                          },
                          "example": {
                              "email": "emailsample@gmail.com",
                              "name": "sample name",
                              "description": "sample description",
                              "avatar": "sample avatar"
                          }
                      }
                  }
              }
          },
          "responses": {
              "200": {
                "description": "OK"
              },
              "400": {
                "description": "The email is already taken!"
              },
              "404": {
                "description": "The user does not exists!"
              }
          }
        },
        "delete": {
          "tags": ["Customers"],
          "summary": "Delete a customer",
          "description": "The costumer can delete the his account",
          "security": [
            {
                "bearerAuth": []
            }
          ],
          "responses": {
              "204": {
                "description": "No Content"
              },
              "404": {
                "description": "Costumer does not exists!"
              }
          }
        }
    },
    "/categories": {
      "post": {
        "tags": ["Category"],
        "summary": "Create a category",
        "description": "Create a new category",
        "security": [
            {
                "bearerAuth": []
            }
        ],
        "requestBody": {
            "content": {
                "application/json": {
                    "schema": {
                        "type": "object",
                        "properties": {
                            "name": {
                                "type": "string"
                            },
                            "description": {
                                "type": "string"
                            }
                        },
                        "example": {
                            "name": "category name sample",
                            "description": "category description sample"
                        }
                    }
                }
            }
        },
        "responses": {
            "201": {
                "description": "Created"
            },
            "400": {
                "description": "The name is already used!"
            },
            "401": {
                "description": "Something is wrong with the token!"
            }
        }
      },
      "get": {
        "tags": ["Category"],
        "summary": "List all categories",
        "description": "List all categories",
        "responses": {
            "200": {
                "description": "OK",
                "content": {
                    "application/json": {
                        "schema": {
                            "type": "array",
                            "items": {
                                "type": "object",
                                "properties": {
                                    "name": {
                                        "type": "string"
                                    },
                                    "description": {
                                        "type": "string"
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
      },
      "put": {
        "tags": ["Category"],
        "summary": "Update a category",
        "description": "The admin can update a category data",
        "security": [
          {
              "bearerAuth": []
          }
        ],
        "parameters": [
          {
              "name": "id",
              "in": "path",
              "description": "Category id",
              "required": true,
              "schema": {
                  "type": "string"
              }
          }
        ],
        "requestBody": {
            "content": {
                "application/json": {
                    "schema": {
                        "type": "object",
                        "properties": {
                            "name": {
                              "type": "string",
                              "required": false
                            },
                            "description": {
                              "type": "string",
                              "required": false
                            }
                        },
                        "example": {
                            "name": "sample name",
                            "description": "sample description"
                        }
                    }
                }
            }
        },
        "responses": {
            "200": {
              "description": "OK"
            },
            "400": {
              "description": "The category already exists!"
            },
            "401": {
              "description": "Something is wrong with the token!"
            },
            "404": {
              "description": "The category does not exists!"
            }
        }
      },
      "delete": {
        "tags": ["Category"],
        "summary": "Delete a category",
        "description": "The admin can delete the a category",
        "security": [
          {
              "bearerAuth": []
          }
        ],
        "parameters": [
          {
              "name": "id",
              "in": "path",
              "description": "Category id",
              "required": true,
              "schema": {
                  "type": "string"
              }
          }
        ],
        "responses": {
            "204": {
              "description": "No Content"
            },
            "401": {
              "description": "Something is wrong with the token!"
            },
            "404": {
              "description": "The category was not found!"
            }
        }
      }
    }
  },
  "components": {
    "securitySchemes": {
        "bearerAuth": {
            "type": "http",
            "scheme": "bearer",
            "bearerFormat": "JWT"
        }
    }
  }

}
